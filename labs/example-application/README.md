#  Sample Applications Instrumented for SigNoz

This directory contains fully instrumented sample applications that send logs, metrics, and traces to SigNoz.

##  Index

- [Node.js + Express](#nodejs--express)
- [Python + Flask](#python--flask)
- [Instrumentation Concepts](#instrumentation-concepts)
- [How It Works](#how-it-works)

---

##  Node.js + Express

### Application Structure

```
app-nodejs/
├── package.json          # Dependencies
├── server.js             # Main application
├── instrumentation.js    #  OpenTelemetry instrumentation
├── routes/
│   └── api.js           # API routes
└── README.md            # App-specific instructions
```

### How to Run

```bash
cd app-nodejs
npm install
npm start
```

The application will run at http://localhost:3000

**Available endpoints:**
- `GET /api/health` – Health check
- `GET /api/users` – List users
- `GET /api/users/:id` – Fetch a specific user
- `POST /api/users` – Create a new user
- `GET /api/products` – List products (simulates errors)
- `GET /api/slow` – Slow endpoint (for metrics demos)

---

##  Python + Flask

### Application Structure

```
app-python/
├── requirements.txt      # Python dependencies
├── app.py                # Main application
├── instrumentation.py    #  OpenTelemetry instrumentation
├── routes/
│   └── api.py           # API routes
└── README.md            # App-specific instructions
```

### How to Run

```bash
cd app-python
pip install -r requirements.txt
python app.py
```

The application will run at http://localhost:5000

**Available endpoints:**
- `GET /api/health` – Health check
- `GET /api/users` – List users
- `GET /api/users/<id>` – Fetch a specific user
- `POST /api/users` – Create a new user
- `GET /api/random-error` – Generate a random error
- `GET /api/slow` – Slow endpoint

---

##  Instrumentation Concepts

### 1. OpenTelemetry (OTEL)

**What is it?** A standardized framework for collecting telemetry data (logs, metrics, traces) from applications.

**Core components:**
- **Instrumentation**: Code that collects data from your app
- **Exporters**: Send data to backends (like SigNoz)
- **Collector**: Receives and processes data (OTel Collector)
- **SDKs**: Language-specific libraries

### 2. The Three Pillars of Observability

####  **LOGS**
- **What**: Events happening within the application
- **When to use**: Debug, auditing, flow tracking
- **Example**: “User created”, “Payment processing error”

####  **METRICS**
- **What**: Numerical values measured over time
- **When to use**: Performance and application health
- **Example**: Requests per second, response time, CPU usage

####  **TRACES**
- **What**: A request flowing through multiple services
- **When to use**: Debugging issues in distributed systems
- **Example**: Trace of an HTTP request across API, DB, cache

### 3. How the Data Flows

```
┌─────────────────┐
│  Your App       │
│  (Node/Python)  │
└────────┬────────┘
         │
         │ 1. Data generated by the OpenTelemetry SDK
         ▼
┌──────────────────────────┐
│  OTel Collector          │
│  (port 4317 or 4318)     │
└────────┬─────────────────┘
         │
         │ 2. Processes and forwards data
         ▼
┌──────────────────────────┐
│  ClickHouse              │
│  (Database)              │
└────────┬─────────────────┘
         │
         │ 3. Stores telemetry
         ▼
┌──────────────────────────┐
│  SigNoz Frontend         │
│  (Visualization)         │
└──────────────────────────┘
```

---

##  How It Works

### Step 1: Install OpenTelemetry

**Node.js:**
```javascript
npm install @opentelemetry/api
npm install @opentelemetry/sdk-node
npm install @opentelemetry/exporter-otlp-grpc
// Auto instrumentation for popular libraries
npm install @opentelemetry/instrumentation-http
npm install @opentelemetry/instrumentation-express
```

**Python:**
```python
pip install opentelemetry-api
pip install opentelemetry-sdk
pip install opentelemetry-exporter-otlp-proto-grpc
# Auto instrumentation
pip install opentelemetry-instrumentation-flask
pip install opentelemetry-instrumentation-requests
```

### Step 2: Configure the SDK

The OpenTelemetry SDK must understand:
1. **Where to send the data**: OTel Collector endpoint
2. **What to collect**: Logs, metrics, traces
3. **How to structure it**: Attributes, context

### Step 3: Auto Instrumentation

Magic! OpenTelemetry automatically instruments:
-  HTTP libraries
-  Web frameworks (Express, Flask)
-  Database calls
-  Redis
-  Kafka
-  And many more!

All without changing your application code.

### Step 4: Send Data

Data is automatically sent to:
- **Endpoint**: `http://localhost:4317` (gRPC)
- **Protocol**: OTLP (OpenTelemetry Protocol)
- **Format**: gRPC

---

##  Next Steps

1.  Run the sample applications  
2.  Visit http://localhost:8080 to explore SigNoz  
3.  Inspect Traces, Metrics, and Logs  
4.  Adapt the instrumentation to your services  
5.  Read the [official documentation](https://signoz.io/docs/)  

##  Additional Resources

- [OpenTelemetry Docs](https://opentelemetry.io/docs/)
- [SigNoz Instrumentation Guide](https://signoz.io/docs/instrumentation/)
- [OTLP Protocol](https://opentelemetry.io/docs/specs/otlp/)

